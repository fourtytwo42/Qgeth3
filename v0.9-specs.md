# Quantum-Geth v0.9–BareBones+Halving

**Minimalist Quantum-Anchored Proof-of-Work with Bitcoin-Style Halving and Fee-Incentives**
*(Specification freeze candidate — 30 June 2025)*

---

## Abstract

Quantum-Geth v0.9–BareBones+Halving presents the leanest specification of a unified, branch-serial quantum Proof-of-Work chain that integrates a Bitcoin-style block subsidy halving and full gas-fee rewards. It preserves full cryptographic security—48 sequential depth-8 192, 16-qubit circuits per block, canonical-compile binding, post-quantum SNARK proofs, and self-derived Dilithium attestation—while adopting a classical economic schedule: 50 QGCoins per block at launch, halved every epoch, with all transaction fees awarded to miners. Verification remains lightweight on commodity hardware.

---

## Contents

1. [Design Goals & Principles](#1-design-goals--principles)
2. [Consensus Artefacts](#2-consensus-artefacts)
3. [Block Header Layout](#3-block-header-layout)
4. [Quantum Puzzle Pipeline](#4-quantum-puzzle-pipeline)
5. [Canonical Compile & GateHash](#5-canonical-compile--gatehash)
6. [Execution Back-Ends](#6-execution-back-ends)
7. [Validity-Proof Stack](#7-validity-proof-stack)
8. [Dilithium Self-Attestation](#8-dilithium-self-attestation)
9. [Security Hardness Table](#9-security-hardness-table)
10. [Difficulty Adjustment & ASERT-Q](#10-difficulty-adjustment--asert-q)
11. [Reward Model & Halving Schedule](#11-reward-model--halving-schedule)
12. [Networking & Performance](#12-networking--performance)
13. [Audit Guard-Rails](#13-audit-guard-rails)
      13.1 [QROM Audit & `ProofSystemHash`](#131-qrom-audit--proofsystemhash)
      13.2 [Template Iso-Hardness Audit & `TemplateAuditRoot_v2`](#132-template-iso-hardness-audit--templateauditroot_v2)
14. [Troubleshooting & Common Pitfalls](#14-troubleshooting--common-pitfalls)
15. [Residual Risks & Next Steps](#15-residual-risks--next-steps)
16. [Genesis Constants & Configuration Hashes](#16-genesis-constants--configuration-hashes)

---

## 1 Design Goals & Principles

1. **Quantum-Anchored Work**

   * Consensus work is the *actual execution* of 48 sequential quantum circuits, each 16 qubits × 8 192 T-gates.
2. **Branch-Serial Dependence**

   * Puzzle *i+1*’s circuit topology derives from puzzle *i*’s measurement, preventing pipelined speed-ups.
3. **Canonical-Compile Binding**

   * Exact transpiled gate streams are hashed (`GateHash`), disallowing backend optimizations that alter depth or T-count.
4. **Post-Quantum Soundness**

   * Proof stack: Mahadev’s interactive base → CAPSS SNARK → Nova-Lite recursion, all secured under the QROM.
5. **Self-Derived Post-Quantum Attestation**

   * Dilithium-2 signature derived deterministically from block seeds binds the prover to outcomes.
6. **Bitcoin-Style Economic Schedule**

   * Fixed subsidy of 50 QGCoins per block at launch, halved each *epoch*; all gas fees go to the miner.
7. **Governance-Free Immutability**

   * Parameters (glide schedule, halving epoch) are immutable on-chain; future changes require an off-chain hard-fork at a known height.
8. **Lightweight Verification**

   * Full block validation on commodity hardware completes in ≤ 50 ms and ≤ 20 MB RAM.

---

## 2 Consensus Artefacts

* **Ethereum 15-tuple header**: unmodified for compatibility.
* **Tier-2 Quantum Blob**: one RLP `tail` byte slice (\~ 416 B) carrying all quantum fields.

---

## 3 Block Header Layout

**Tier-2 Quantum Blob (RLP tail)**

| Field           | Size | Description                              |
| --------------- | ---: | ---------------------------------------- |
| `Epoch`         |  4 B | ⌊Height / 600 000⌋ (6 mo epochs)         |
| `QBits`         |  2 B | Logical qubits per puzzle (initially 16) |
| `TCount`        |  4 B | T-gate depth (initially 8 192)           |
| `LNet`          |  2 B | # puzzles per block (initially 48)       |
| `QNonce64`      |  8 B | 64-bit nonce                             |
| `ExtraNonce32`  | 32 B | Additional entropy                       |
| `OutcomeRoot`   | 32 B | MerkleRoot of 48 × 16-bit outcomes       |
| `BranchNibbles` | 48 B | High-nibble of each outcome              |
| `GateHash`      | 32 B | SHA-256 of canonical gate streams        |
| `ProofRoot`     | 32 B | MerkleRoot of three Nova-Lite proofs     |
| `AttestMode`    |  1 B | 0x00 = Dilithium self-attest             |

*Block body* includes Dilithium `pk+Sig` (1 744 B), Nova proofs, transactions, and receipts.

---

## 4 Quantum Puzzle Pipeline

1. **Seed₀ Generation**
   $\mathrm{Seed}_0 = \mathrm{SHA256}(\mathrm{ParentHash}\|\mathrm{TxRoot}\|\mathrm{ExtraNonce32}\|\mathrm{QNonce64})$.
2. **Sequential Puzzles** (i=0…47)

   * **Compile** branch circuit from `Seedᵢ`.
   * **Execute** on quantum backend → `Outcomeᵢ` (16 bits).
   * **Chain**: $\mathrm{Seed}_{i+1} = \mathrm{SHA256}(\mathrm{Seed}_i\|\mathrm{Outcome}_i)$.
3. **OutcomeRoot** = MerkleRoot(Outcome₀…Outcome₄₇).
4. **BranchNibbles** = high 4 bits of each `Outcomeᵢ`.

---

## 5 Canonical Compile & GateHash

```go
streamᵢ := CanonicalCompile(seedᵢ, qasmᵢ)  // opt_level=0, apply Z-mask
GateHash := SHA256(stream₀ ∥ … ∥ stream₄₇)
```

* **opt\_level=0** prohibits gate merging or commutation.
* **Verifier** repro-duces streams and validates `GateHash`.

---

## 6 Execution Back-Ends

* **Qiskit AerSimulator** (tensor or state-vector).
* **IBM Qiskit Runtime** on Eagle/Heron.
* **Vendor SDK shim** for other QPUs.

---

## 7 Validity-Proof Stack

| Layer  | System        | Count |   Proof Size | Verifier Load         |
| ------ | ------------- | ----: | -----------: | --------------------- |
| Tier 0 | Mahadev trace |    48 | \~ 100 kB ea | prover only           |
| Tier A | CAPSS SNARK   |    48 | \~ 2.2 kB ea | streamed FFT          |
| Tier B | Nova-Lite     |     3 |    ≤ 6 kB ea | ≲ 1.7 MB RAM, ≲ 28 ms |
| Tier C | Merkle32 root |     1 |         32 B | negligible            |

*Sound under QROM audited via `ProofSystemHash`.*

---

## 8 Dilithium Self-Attestation

```text
Seed_att = SHA256("ATTEST"‖Seed₀‖OutcomeRoot‖ChainIDHash‖BlockNumber)
(sk,pk) = Dilithium2.KeyGen(Seed_att)
Sig      = Dilithium2.Sign(sk, Seed₀‖OutcomeRoot‖GateHash)
```

* **`pk+Sig`** (1 744 B) in block body.
* **Verify** by regenerating `sk`, deriving `pk`, validating `Sig`.

---

## 9 Security Hardness Table

| QBits | TCount | LNet | Effective Security bits\* |
| ----: | -----: | ---: | ------------------------: |
|    16 |  8 192 |   48 |                       126 |
|    17 |  8 192 |   56 |                       136 |
|    18 |  9 216 |   56 |                       138 |
|    19 |  9 216 |   64 |                       148 |
|    20 | 10 240 |   64 |                       150 |

\* After √-Grover penalty. Launch at 126 bits ≫ classical PoW.

---

## 10 Difficulty Adjustment (ASERT-Q)

$$
\mathrm{newTarget} = \mathrm{oldTarget} \times 2^{\frac{(t_{\mathrm{actual}} - 12\,\mathrm{s})}{150\,\mathrm{s}}}
$$

* **Clamp** ± 10 % per block.
* **Converges** within \~ 5 min of large hashrate changes.

---

## 11 Reward Model & Halving Schedule

### 11.1 Block Subsidy

* **Initial Subsidy**: 50 QGCoins per block at epoch 0.
* **Halving**: At each new *epoch* (600 000 blocks ≈ 6 months), the block subsidy halves:

  $$
    \mathrm{Subsidy}(\mathrm{epoch}) = 50 \times 2^{-\mathrm{epoch}}\; \mathrm{QGCoins}.
  $$
* **Minimum Subsidy**: Continues halving until the subsidy reaches 0; thereafter block subsidy is 0.

### 11.2 Transaction Fees

* **All gas fees** collected in the block are awarded in full to the block miner as a *fee bonus*.
* **Total Miner Reward** = Block Subsidy + Sum of Transaction Fees.

### 11.3 Economic Implications

* **Deflationary issuance** identical to Bitcoin’s 21 M cap trajectory (≈ 1.05 M blocks to render subsidy negligible).
* **Fee Market**: Miners incentivized to include high-fee transactions; no disincentive from empty blocks.
* **Supply Schedule**: Built-in immutability; no on-chain governance to alter issuance curve.

---

## 12 Networking & Performance

* **Header overhead**: ≈ 600 B.
* **Quantum proofs**: ≤ 24 kB.
* **Propagation**: 100 kB block over 10 Mbps in < 200 ms.
* **Verification**: ≤ 50 ms on commodity hardware.
* **Orphan rate**: < 4 % at a 12 s slot.
* **Finality**: 6 confirmations (\~ 72 s) → < 10⁻⁹ reorg risk.

---

## 13 Audit Guard-Rails

### 13.1 QROM Audit & `ProofSystemHash`

* **Purpose**: Formal QROM reduction proof for Mahadev→CAPSS→Nova.
* **Artifact**: IACR ePrint, Coq scripts.
* **Genesis constant**:

  ```
  ProofSystemHash = 0xA1B2C3D4…1234
  ```

### 13.2 Template Iso-Hardness Audit & `TemplateAuditRoot_v2`

* **Purpose**: Coq-certified permutation equivalence of 16 templates.
* **Artifact**: Coq proofs + SMACK CNFs + hardware fidelity data.
* **Genesis constant**:

  ```
  TemplateAuditRoot_v2 = 0xDEADBEEF…BEEF
  ```

---

## 14 Troubleshooting & Common Pitfalls

* **RLP Decode Errors**: use single `rlp:"tail"` for quantum blob.
* **GateHash Mismatch**: enforce canonical transpile flags.
* **Proof Chunk Starvation**: implement length/index/CID framing with timeout.
* **Attest DoS**: rate-limit Dilithium verifies (e.g. 200/s).
* **Genesis Difficulty Shock**: apply ASERT λ=0.2 for initial 5 000 blocks.

---

## 15 Residual Risks & Next Steps

* **QROM reduction pending**: finalize formal audit; freeze `ProofSystemHash`.
* **Template audit pending**: finalize Coq/SMACK proof; freeze `TemplateAuditRoot_v2`.
* **Hardware availability**: run foundation pool until QPUs scale.
* **Future upgrades**: off-chain hard-fork at predetermined height.

---

## 16 Genesis Constants & Configuration Hashes

| Constant               | Value             | Purpose                              |
| ---------------------- | ----------------- | ------------------------------------ |
| `ProofSystemHash`      | `0xA1B2C3D4…1234` | QROM audit digest                    |
| `TemplateAuditRoot_v2` | `0xDEADBEEF…BEEF` | Template iso-hardness Merkle root    |
| `GlideTableHash`       | `0xCAFEBABE…FACE` | Quantum parameter glide schedule     |
| `CanonicompSHA`        | `0x12345678…9ABC` | Canonical compiler binary digest     |
| `ChainIDHash`          | `0xFEEDFACE…CAFE` | Chain-ID salt for attestation deriv. |

> Any mismatch at genesis halts synchronization.

---

**End of Specification**
Quantum-Geth v0.9–BareBones+Halving delivers an ungoverned, cryptographically complete quantum PoW system with a Bitcoin-style issuance curve and full fee incentives—achieving maximum security, auditability, and economic alignment in the simplest possible protocol.
